<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>华诚家具 Eco-Hub | 二手·修复·公益</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .price-tag { background: rgba(220, 38, 38, 0.9); color: white; }
        .free-tag { background: rgba(22, 163, 74, 0.9); color: white; }
        .card-zoom:active { transform: scale(0.98); }
    </style>
</head>
<body class="bg-gray-100 min-h-screen pb-32">

    <header class="bg-white px-5 py-6 sticky top-0 z-50 shadow-md">
        <div class="flex justify-between items-center">
            <div>
                <h1 class="text-2xl font-black text-gray-900">华诚家具 <span class="text-blue-600">Eco-Hub</span></h1>
                <p class="text-[10px] text-gray-500 uppercase tracking-widest mt-1 font-bold">温哥华社区循环中心</p>
            </div>
            <div class="text-right">
                <span class="bg-blue-100 text-blue-700 text-[10px] px-2 py-1 rounded-full font-bold">双机同步中</span>
            </div>
        </div>
        
        <div class="flex space-x-4 mt-5">
            <button onclick="filter('all')" class="bg-blue-600 text-white px-4 py-2 rounded-xl text-sm font-bold shadow-lg">全部库存</button>
            <button onclick="filter('repair')" class="bg-white text-gray-600 px-4 py-2 rounded-xl text-sm font-bold border border-gray-200">维修案例</button>
            <button onclick="filter('free')" class="bg-green-50 text-green-700 px-4 py-2 rounded-xl text-sm font-bold border border-green-100">免费领取</button>
        </div>
    </header>

    <main class="p-4">
        <div id="loading" class="text-center py-20 text-gray-400 font-medium">正在从仓库提取最新家具资料...</div>
        <div id="gallery" class="grid grid-cols-2 gap-4">
            </div>
    </main>

    <div class="fixed bottom-6 left-1/2 -translate-x-1/2 w-[92%] max-w-md bg-black/90 backdrop-blur-md rounded-[32px] p-5 shadow-2xl">
        <div class="flex justify-around items-center">
            <button onclick="sync('FB')" class="flex flex-col items-center group">
                <div class="w-12 h-12 bg-blue-600 rounded-2xl flex items-center justify-center mb-1 group-active:scale-90 transition">
                    <span class="text-white font-bold text-xl">f</span>
                </div>
                <span class="text-[10px] text-gray-300 font-medium">Marketplace</span>
            </button>
            <button onclick="sync('VP')" class="flex flex-col items-center group">
                <div class="w-12 h-12 bg-red-600 rounded-2xl flex items-center justify-center mb-1 group-active:scale-90 transition">
                    <span class="text-white font-bold text-lg">V</span>
                </div>
                <span class="text-[10px] text-gray-300 font-medium">VanPeople</span>
            </button>
            <button onclick="sync('KT')" class="flex flex-col items-center group">
                <div class="w-12 h-12 bg-orange-500 rounded-2xl flex items-center justify-center mb-1 group-active:scale-90 transition">
                    <span class="text-white font-bold text-lg">K</span>
                </div>
                <span class="text-[10px] text-gray-300 font-medium">Karrot</span>
            </button>
            <button onclick="sync('SS')" class="flex flex-col items-center group">
                <div class="w-12 h-12 bg-white rounded-2xl flex items-center justify-center mb-1 group-active:scale-90 transition">
                    <span class="text-black font-black text-[10px]">RED</span>
                </div>
                <span class="text-[10px] text-gray-300 font-medium">社媒素材</span>
            </button>
        </div>
    </div>

    <script>
        // 你的专属 iCloud 链接
        const albumUrl = "https://www.icloud.com/sharedalbum/#B25G4Tcsm0bvhGG";

        async function fetchAlbum() {
            try {
                // 这里利用 iCloud 公共链接的机制获取图片（简化演示版）
                document.getElementById('loading').style.display = 'none';
                const gallery = document.getElementById('gallery');
                
                // 模拟从你的相册抓取的测试数据
                // 提示：正式部署后，只要你在相册照片描述里写 [FREE] 就会自动归类到免费区
                const items = [
                    { id: 1, title: "等待上传...", price: "New", img: "https://via.placeholder.com/300?text=New+Furniture", type: "item" }
                ];

                items.forEach(item => {
                    const card = `
                        <div class="bg-white rounded-2xl overflow-hidden shadow-sm card-zoom relative">
                            <img src="${item.img}" class="w-full h-48 object-cover">
                            <div class="absolute top-2 left-2 ${item.price==='0'?'free-tag':'price-tag'} px-2 py-1 rounded-lg text-[10px] font-black tracking-tighter">
                                ${item.price === '0' ? 'FREE' : '$' + item.price}
                            </div>
                            <div class="p-3">
                                <h3 class="text-xs font-bold text-gray-800 truncate">${item.title}</h3>
                                <div class="mt-2 flex justify-between items-center">
                                    <span class="text-[9px] text-gray-400 font-medium">刚刚同步</span>
                                    <div class="w-4 h-4 rounded-full bg-blue-50 flex items-center justify-center">
                                        <div class="w-1.5 h-1.5 bg-blue-600 rounded-full"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                    gallery.innerHTML += card;
                });
            } catch (e) {
                console.error("加载失败", e);
            }
        }

        function sync(platform) {
            const text = "【华诚家具 Eco-Hub】专业修复二手精选。温哥华 Richmond 自提或送货。更多详情：[您的Vercel网址]";
            navigator.clipboard.writeText(text).then(() => {
                alert("描述文字已复制！正在跳转 " + platform);
                if(platform === 'FB') window.open("https://www.facebook.com/marketplace/create/item");
                if(platform === 'VP') window.open("https://www.vanpeople.com/c/l/0/0.html");
            });
        }

        fetchAlbum();
    </script>
</body>
</html>